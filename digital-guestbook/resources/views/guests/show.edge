<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ guest.name }} | Buku Tamu Digital</title>
  @vite(['resources/css/app.css', 'resources/js/app.js'])
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 font-['Poppins'] text-gray-100 min-h-screen relative overflow-x-hidden">

  <!-- Navigation -->
  <nav class="relative z-10 backdrop-blur-lg bg-white/5 border-b border-white/10 shadow-2xl">
    <div class="container mx-auto px-6 py-6">
      <div class="flex items-center justify-between">
        <a href="/guests" class="flex items-center space-x-3 text-white hover:text-blue-300 transition-all duration-300 group">
          <div class="p-3 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl group-hover:from-blue-600 group-hover:to-cyan-600 transition-all duration-300 shadow-lg">
            <i class="fas fa-arrow-left text-lg"></i>
          </div>
          <div>
            <span class="font-semibold text-lg">Kembali</span>
            <p class="text-sm text-blue-200 opacity-80">ke Daftar Pesan</p>
          </div>
        </a>
        
        <div class="text-right">
          <h1 class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
            Buku Tamu Digital
          </h1>
          <p class="text-sm text-blue-200 opacity-80">Detail Pesan Pengunjung</p>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="relative z-10 container mx-auto px-6 py-16">
    <div class="max-w-4xl mx-auto">
      
      <!-- Message Card -->
      <div class="backdrop-blur-lg bg-white/10 rounded-3xl shadow-2xl border border-white/20 overflow-hidden">
        
        <!-- Header Section -->
        <div class="bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20 p-8 border-b border-white/20">
          <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
            
            <!-- User Info -->
            <div class="flex items-center space-x-4">
              <div class="w-20 h-20 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-2xl">
                <i class="fas fa-user text-white text-2xl"></i>
              </div>
              
              <div>
                <h1 class="text-3xl lg:text-4xl font-bold text-white mb-2 tracking-tight">
                  {{ guest.name }}
                </h1>
                <div class="flex flex-col sm:flex-row sm:items-center gap-3 text-blue-200">
                  <div class="flex items-center space-x-2">
                    <i class="fas fa-envelope text-blue-400"></i>
                    <span class="text-sm">{{ guest.email }}</span>
                  </div>
                  @if(guest.phone)
                    <div class="flex items-center space-x-2">
                      <i class="fas fa-phone text-green-400"></i>
                      <span class="text-sm">{{ guest.phone }}</span>
                    </div>
                  @endif
                </div>
              </div>
            </div>

            <!-- Date & Rating -->
            <div class="text-center lg:text-right">
              <div class="flex items-center justify-center lg:justify-end mb-3 space-x-1">
              <i class="fas fa-star text-yellow-400 text-sm drop-shadow-lg"></i>
                <p class="text-2xl font-bold text-white mb-1">{{ guest.rating }}/5</p>
                <p class="text-sm text-blue-200 opacity-80">
                  <i class="fas fa-calendar-alt mr-1"></i>
                  {{ guest.createdAt.toFormat('dd MMMM yyyy') }}
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Message Content -->
        <div class="p-8 lg:p-12">
          <div class="mb-8">
            <h2 class="text-2xl font-semibold text-white mb-6">
              <i class="fas fa-quote-left mr-2 text-purple-400"></i>
              Pesan & Kesan
            </h2>
            
            <!-- Message Box -->
            <div class="bg-gradient-to-br from-white/5 to-white/10 rounded-2xl p-8 border border-white/20">
              <p class="text-white/95 text-lg leading-relaxed break-words whitespace-normal">
                {{ guest.message }}
              </p>
            </div>
          </div>

          <!-- Engagement Section -->
          <div class="border-t border-white/20 pt-8">
            <div class="flex flex-col sm:flex-row justify-between items-center gap-6">
              
              <!-- Interaction Buttons -->
             <button onclick="shareMessage()" class="flex items-center space-x-2 px-4 py-2 backdrop-blur-lg bg-white/10 border border-white/20 rounded-full hover:bg-white/20 hover:border-white/30 transition-all duration-300">
                  <i class="fas fa-share text-blue-400"></i>
                  <span class="text-white">Bagikan</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Related Actions -->
      <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-6">
        
        <!-- Write New Message -->
        <div class="backdrop-blur-lg bg-white/5 rounded-2xl p-8 border border-white/10 hover:bg-white/10 hover:border-white/20 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl">
          <div class="text-center">
            <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
              <i class="fas fa-pen text-white text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-white mb-2">Tulis Pesan Baru</h3>
            <p class="text-blue-200 text-sm mb-6 opacity-80">Bagikan pengalaman Anda juga</p>
            <a href="/guests/create" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white font-medium rounded-full hover:from-green-600 hover:to-blue-600 transition-all duration-300 transform hover:scale-105 shadow-lg">
              <i class="fas fa-plus mr-2"></i>
              Tulis Sekarang
            </a>
          </div>
        </div>

        <!-- View All Messages -->
        <div class="backdrop-blur-lg bg-white/5 rounded-2xl p-8 border border-white/10 hover:bg-white/10 hover:border-white/20 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl">
          <div class="text-center">
            <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
              <i class="fas fa-comments text-white text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-white mb-2">Lihat Semua Pesan</h3>
            <p class="text-blue-200 text-sm mb-6 opacity-80">Jelajahi pesan pengunjung lainnya</p>
            <a href="/guests" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-medium rounded-full hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105 shadow-lg">
              <i class="fas fa-arrow-left mr-2"></i>
              Kembali ke Daftar
            </a>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Notification -->
  <div id="notification" class="fixed bottom-6 right-6 transform translate-x-full transition-transform duration-300 z-50">
    <div class="bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-4 rounded-full shadow-2xl border border-white/20 backdrop-blur-lg">
      <div class="flex items-center space-x-3">
        <i id="notificationIcon" class="fas fa-check-circle text-xl"></i>
        <span id="notificationText" class="font-medium">Berhasil!</span>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="relative z-10 backdrop-blur-lg bg-white/5 border-t border-white/10 py-8 mt-20">
    <div class="container mx-auto px-6 text-center">
      <p class="text-blue-200 font-light">
        © 2025 Buku Tamu Digital – Dibuat dengan 
        <i class="fas fa-heart text-red-400 mx-1 animate-pulse"></i> 
      </p>
    </div>
  </footer>

  <style>
    /* Animations */
    @keyframes blob {
      0% { transform: translate(0px, 0px) scale(1); }
      33% { transform: translate(30px, -50px) scale(1.1); }
      66% { transform: translate(-20px, 20px) scale(0.9); }
      100% { transform: translate(0px, 0px) scale(1); }
    }

    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse-scale {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .animate-blob {
      animation: blob 7s infinite;
    }
    
    .animate-fade-in-up {
      animation: fade-in-up 0.8s ease-out forwards;
    }
    
    .animation-delay-500 {
      animation-delay: 0.5s;
    }
    
    .animation-delay-2000 {
      animation-delay: 2s;
    }

    .animate-pulse-scale {
      animation: pulse-scale 0.3s ease-in-out;
    }
  </style>

  <script>

    // Share functionality
    function shareMessage() {
      const shareData = {
        title: 'Pesan dari {{ guest.name }} - Buku Tamu Digital',
        text: 'Lihat pesan yang ditinggalkan di Buku Tamu Digital: "{{ guest.message }}"'.substring(0, 100) + '...',
        url: window.location.href
      };
      
      if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {
        navigator.share(shareData)
          .then(() => {
            showNotification('Berhasil membagikan pesan!', 'success');
          })
          .catch((err) => {
            console.error('Sharing failed:', err);
            fallbackShare();
          });
      } else {
        fallbackShare();
      }
    }
    
    function fallbackShare() {
      // Create share menu
      const shareMenu = document.createElement('div');
      shareMenu.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm';
      shareMenu.innerHTML = `
        <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 max-w-sm w-full mx-4">
          <h3 class="text-xl font-semibold text-white mb-4 text-center">Bagikan Pesan</h3>
          <div class="space-y-3">
            <button onclick="copyToClipboard('${window.location.href}')" class="w-full flex items-center space-x-3 p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-all duration-300">
              <i class="fas fa-copy text-blue-400"></i>
              <span class="text-white">Salin Link</span>
            </button>
            <button onclick="shareToWhatsApp()" class="w-full flex items-center space-x-3 p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-all duration-300">
              <i class="fab fa-whatsapp text-green-400"></i>
              <span class="text-white">WhatsApp</span>
            </button>
            <button onclick="shareToTwitter()" class="w-full flex items-center space-x-3 p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-all duration-300">
              <i class="fab fa-twitter text-blue-400"></i>
              <span class="text-white">Twitter</span>
            </button>
          </div>
          <button onclick="closeShareMenu()" class="w-full mt-4 py-2 text-blue-200 hover:text-white transition-colors duration-300">
            Tutup
          </button>
        </div>
      `;
      document.body.appendChild(shareMenu);
      window.currentShareMenu = shareMenu;
    }
    
    function closeShareMenu() {
      if (window.currentShareMenu) {
        window.currentShareMenu.remove();
        window.currentShareMenu = null;
      }
    }
    
    function shareToWhatsApp() {
      const text = encodeURIComponent(`Lihat pesan dari {{ guest.name }} di Buku Tamu Digital: ${window.location.href}`);
      window.open(`https://wa.me/?text=${text}`, '_blank');
      closeShareMenu();
      showNotification('Membuka WhatsApp...', 'info');
    }
    
    function shareToTwitter() {
      const text = encodeURIComponent(`Lihat pesan berkesan dari {{ guest.name }} di Buku Tamu Digital`);
      const url = encodeURIComponent(window.location.href);
      window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
      closeShareMenu();
      showNotification('Membuka Twitter...', 'info');
    }
    
    // Copy link functionality
    function copyLink() {
      copyToClipboard(window.location.href);
    }
    
    function copyToClipboard(text) {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text)
          .then(() => {
            showNotification('Link berhasil disalin!', 'success');
          })
          .catch(() => {
            fallbackCopyToClipboard(text);
          });
      } else {
        fallbackCopyToClipboard(text);
      }
      
      if (window.currentShareMenu) {
        closeShareMenu();
      }
    }
    
    function fallbackCopyToClipboard(text) {
      const textArea = document.createElement('textarea');
      textArea.value = text;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      textArea.style.top = '-999999px';
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      
      try {
        document.execCommand('copy');
        showNotification('Link berhasil disalin!', 'success');
      } catch (err) {
        showNotification('Gagal menyalin link', 'error');
      }
      
      document.body.removeChild(textArea);
    }
    
    // Notification function
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      const notificationText = document.getElementById('notificationText');
      const notificationIcon = document.getElementById('notificationIcon');
      
      // Set message
      notificationText.textContent = message;
      
      // Set icon based on type
      const icons = {
        success: 'fas fa-check-circle',
        error: 'fas fa-exclamation-circle', 
        info: 'fas fa-info-circle'
      };
      
      notificationIcon.className = icons[type] || icons.success;
      
      // Show notification
      notification.classList.remove('translate-x-full');
      notification.classList.add('translate-x-0');
      
      // Hide after 3 seconds
      setTimeout(() => {
        notification.classList.remove('translate-x-0');
        notification.classList.add('translate-x-full');
      }, 3000);
    }
    
    // Close share menu when clicking outside
    document.addEventListener('click', (e) => {
      if (window.currentShareMenu && e.target === window.currentShareMenu) {
        closeShareMenu();
      }
    });
    
    // ESC key to close share menu
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && window.currentShareMenu) {
        closeShareMenu();
      }
    });
  </script>
</body>
</html>